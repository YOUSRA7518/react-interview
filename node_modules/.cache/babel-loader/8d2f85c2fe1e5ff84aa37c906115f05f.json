{"ast":null,"code":"import _toConsumableArray from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yousrachahi/Downloads/react-interview-master 2/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yousrachahi/Downloads/react-interview-master 2/src/App.js\";\nimport React, { Component } from \"react\";\nimport { MdReplay, MdChevronLeft, MdChevronRight, MdFirstPage, MdLastPage } from \"react-icons/md\";\nimport Movie from \"./Movie\";\nimport Multiselect from \"./Multiselect\";\nimport FlipMove from \"react-flip-move\";\nimport { movies$ } from \"./movies\";\nimport \"./App.css\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n    _this.state = {\n      filter: [],\n      display: 4,\n      page: 1\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getMovies();\n    }\n  }, {\n    key: \"getMovies\",\n    value: function getMovies() {\n      var _this2 = this;\n\n      movies$.then(function (movies) {\n        return _this2.setState({\n          movies: JSON.parse(JSON.stringify(movies)),\n          maxPages: Math.ceil(movies.length / _this2.state.display)\n        }, function () {\n          _this2.setState({\n            filteredMovies: _this2.state.movies\n          });\n        });\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.getMovies();\n      this.setState({\n        filter: []\n      });\n      document.querySelectorAll(\".filter-container.categories .dropdown div\").forEach(function (el) {\n        el.classList.remove(\"selected\");\n      });\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(id) {\n      var index = this.state.movies.findIndex(function (movie) {\n        return movie.id === id;\n      });\n      if (index >= 0) return index;\n      return -1;\n    }\n  }, {\n    key: \"deleteMovie\",\n    value: function deleteMovie(id) {\n      var _this3 = this;\n\n      var movies = this.state.movies;\n      var index = this.getIndex(id);\n\n      if (index >= 0) {\n        movies.splice(index, 1);\n        this.setState({\n          movies: movies\n        }, function () {\n          _this3.setMaxPages();\n\n          _this3.getFilteredMovies();\n        });\n      }\n    }\n  }, {\n    key: \"likeMovie\",\n    value: function likeMovie(id) {\n      var movies = this.state.movies;\n      movies[this.getIndex(id)].likes++;\n      this.setState({\n        movies: movies\n      });\n    }\n  }, {\n    key: \"dislikeMovie\",\n    value: function dislikeMovie(id) {\n      var movies = this.state.movies;\n      movies[this.getIndex(id)].dislikes++;\n      this.setState({\n        movies: movies\n      });\n    }\n  }, {\n    key: \"getCategories\",\n    value: function getCategories() {\n      if (!this.state.movies) return null;\n      var categories = [];\n      this.state.movies.forEach(function (movie) {\n        categories.push(movie.category);\n      });\n      return categories.filter(function (key, idx) {\n        return categories.lastIndexOf(key) === idx;\n      });\n    }\n  }, {\n    key: \"selectCategory\",\n    value: function selectCategory(category) {\n      var _this4 = this;\n\n      var index = this.state.filter.findIndex(function (cat) {\n        return cat === category;\n      });\n\n      if (index === -1) {\n        this.setState(function (prevState) {\n          return {\n            filter: [].concat(_toConsumableArray(prevState.filter), [category]),\n            page: 1\n          };\n        }, function () {\n          return _this4.getFilteredMovies();\n        });\n      } else {\n        var filter = this.state.filter;\n        filter.splice(index, 1);\n        this.setState({\n          filter: filter,\n          page: 1\n        }, function () {\n          return _this4.getFilteredMovies();\n        });\n      }\n    }\n  }, {\n    key: \"getFilteredMovies\",\n    value: function getFilteredMovies() {\n      var _this5 = this;\n\n      var filteredMovies = this.state.movies.filter(function (movie) {\n        return _this5.state.filter.length === 0 || _this5.state.filter.find(function (cat) {\n          return cat === movie.category;\n        });\n      });\n      console.log(filteredMovies.length);\n\n      if (filteredMovies.length === 0) {\n        this.setState({\n          filter: [],\n          filteredMovies: this.state.movies\n        }, function () {\n          return _this5.setMaxPages();\n        });\n      } else {\n        this.setState({\n          filteredMovies: filteredMovies\n        }, function () {\n          return _this5.setMaxPages();\n        });\n      }\n    }\n  }, {\n    key: \"selectDisplay\",\n    value: function selectDisplay(count) {\n      var _this6 = this;\n\n      this.setState({\n        display: count,\n        page: 1\n      }, function () {\n        return _this6.setMaxPages();\n      });\n    }\n  }, {\n    key: \"firstPage\",\n    value: function firstPage() {\n      this.setState({\n        page: 1\n      });\n    }\n  }, {\n    key: \"changePage\",\n    value: function changePage(count) {\n      var newPage = this.state.page + count;\n      if (newPage > 0 && newPage <= this.state.maxPages) this.setState({\n        page: newPage\n      });\n    }\n  }, {\n    key: \"lastPage\",\n    value: function lastPage() {\n      this.setState({\n        page: this.state.maxPages\n      });\n    }\n  }, {\n    key: \"setMaxPages\",\n    value: function setMaxPages() {\n      var _this7 = this;\n\n      this.setState({\n        maxPages: Math.ceil(this.state.filteredMovies.length / this.state.display)\n      }, function () {\n        if (_this7.state.page > _this7.state.maxPages) {\n          _this7.changePage(-1);\n        }\n      });\n    }\n  }, {\n    key: \"renderMovies\",\n    value: function renderMovies() {\n      var _this8 = this;\n\n      if (!this.state.movies || !this.state.filteredMovies) return null;\n      var counter = 0;\n      var pageCounter = (this.state.page - 1) * this.state.display;\n      return this.state.filteredMovies.map(function (movie, index) {\n        if (counter === _this8.state.display || index < pageCounter) return null;\n        counter++;\n        return React.createElement(Movie, {\n          key: movie.id,\n          id: movie.id,\n          title: movie.title,\n          category: movie.category,\n          likes: movie.likes,\n          dislikes: movie.dislikes,\n          onDelete: function onDelete(id) {\n            return _this8.deleteMovie(id);\n          },\n          onLike: function onLike(id) {\n            return _this8.likeMovie(id);\n          },\n          onDislike: function onDislike(id) {\n            return _this8.dislikeMovie(id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(MdReplay, {\n        className: \"refresh\",\n        onClick: function onClick() {\n          return _this9.refresh();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(Multiselect, {\n        type: \"categories\",\n        options: this.getCategories(),\n        onSelect: function onSelect(category) {\n          return _this9.selectCategory(category);\n        },\n        multiple: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(Multiselect, {\n        type: \"display\",\n        options: [4, 8, 12],\n        onSelect: function onSelect(count) {\n          return _this9.selectDisplay(count);\n        },\n        multiple: false,\n        selected: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })), React.createElement(FlipMove, {\n        className: \"card-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, this.renderMovies()), React.createElement(\"div\", {\n        className: \"nav page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(MdFirstPage, {\n        onClick: function onClick() {\n          return _this9.firstPage();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(MdChevronLeft, {\n        onClick: function onClick() {\n          return _this9.changePage(-1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), \"Page \", this.state.page, React.createElement(MdChevronRight, {\n        onClick: function onClick() {\n          return _this9.changePage(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), React.createElement(MdLastPage, {\n        onClick: function onClick() {\n          return _this9.lastPage();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/yousrachahi/Downloads/react-interview-master 2/src/App.js"],"names":["React","Component","MdReplay","MdChevronLeft","MdChevronRight","MdFirstPage","MdLastPage","Movie","Multiselect","FlipMove","movies$","App","state","filter","display","page","getMovies","then","movies","setState","JSON","parse","stringify","maxPages","Math","ceil","length","filteredMovies","document","querySelectorAll","forEach","el","classList","remove","id","index","findIndex","movie","getIndex","splice","setMaxPages","getFilteredMovies","likes","dislikes","categories","push","category","key","idx","lastIndexOf","cat","prevState","find","console","log","count","newPage","changePage","counter","pageCounter","map","title","deleteMovie","likeMovie","dislikeMovie","refresh","getCategories","selectCategory","selectDisplay","renderMovies","firstPage","lastPage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n\tMdReplay,\n\tMdChevronLeft,\n\tMdChevronRight,\n\tMdFirstPage,\n\tMdLastPage\n} from \"react-icons/md\";\nimport Movie from \"./Movie\";\nimport Multiselect from \"./Multiselect\";\nimport FlipMove from \"react-flip-move\";\nimport { movies$ } from \"./movies\";\nimport \"./App.css\";\n\nexport default class App extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tfilter: [],\n\t\t\tdisplay: 4,\n\t\t\tpage: 1\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getMovies();\n\t}\n\n\tgetMovies() {\n\t\tmovies$.then(movies =>\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tmovies: JSON.parse(JSON.stringify(movies)),\n\t\t\t\t\tmaxPages: Math.ceil(movies.length / this.state.display)\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tfilteredMovies: this.state.movies\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\trefresh() {\n\t\tthis.getMovies();\n\t\tthis.setState({ filter: [] });\n\t\tdocument\n\t\t\t.querySelectorAll(\".filter-container.categories .dropdown div\")\n\t\t\t.forEach(el => {\n\t\t\t\tel.classList.remove(\"selected\");\n\t\t\t});\n\t}\n\n\tgetIndex(id) {\n\t\tlet index = this.state.movies.findIndex(movie => movie.id === id);\n\t\tif (index >= 0) return index;\n\t\treturn -1;\n\t}\n\n\tdeleteMovie(id) {\n\t\tlet movies = this.state.movies;\n\t\tlet index = this.getIndex(id);\n\t\tif (index >= 0) {\n\t\t\tmovies.splice(index, 1);\n\t\t\tthis.setState({ movies }, () => {\n\t\t\t\tthis.setMaxPages();\n\t\t\t\tthis.getFilteredMovies();\n\t\t\t});\n\t\t}\n\t}\n\n\tlikeMovie(id) {\n\t\tlet movies = this.state.movies;\n\t\tmovies[this.getIndex(id)].likes++;\n\t\tthis.setState({\n\t\t\tmovies\n\t\t});\n\t}\n\n\tdislikeMovie(id) {\n\t\tlet movies = this.state.movies;\n\t\tmovies[this.getIndex(id)].dislikes++;\n\t\tthis.setState({\n\t\t\tmovies\n\t\t});\n\t}\n\n\tgetCategories() {\n\t\tif (!this.state.movies) return null;\n\n\t\tlet categories = [];\n\t\tthis.state.movies.forEach(movie => {\n\t\t\tcategories.push(movie.category);\n\t\t});\n\t\treturn categories.filter((key, idx) => categories.lastIndexOf(key) === idx);\n\t}\n\n\tselectCategory(category) {\n\t\tlet index = this.state.filter.findIndex(cat => cat === category);\n\t\tif (index === -1) {\n\t\t\tthis.setState(\n\t\t\t\tprevState => ({\n\t\t\t\t\tfilter: [...prevState.filter, category],\n\t\t\t\t\tpage: 1\n\t\t\t\t}),\n\t\t\t\t() => this.getFilteredMovies()\n\t\t\t);\n\t\t} else {\n\t\t\tlet filter = this.state.filter;\n\t\t\tfilter.splice(index, 1);\n\t\t\tthis.setState({ filter, page: 1 }, () => this.getFilteredMovies());\n\t\t}\n\t}\n\n\tgetFilteredMovies() {\n\t\tlet filteredMovies = this.state.movies.filter(\n\t\t\tmovie =>\n\t\t\t\tthis.state.filter.length === 0 ||\n\t\t\t\tthis.state.filter.find(cat => cat === movie.category)\n\t\t);\n\t\tconsole.log(filteredMovies.length);\n\t\tif (filteredMovies.length === 0) {\n\t\t\tthis.setState({ filter: [], filteredMovies: this.state.movies }, () =>\n\t\t\t\tthis.setMaxPages()\n\t\t\t);\n\t\t} else {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tfilteredMovies\n\t\t\t\t},\n\t\t\t\t() => this.setMaxPages()\n\t\t\t);\n\t\t}\n\t}\n\n\tselectDisplay(count) {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tdisplay: count,\n\t\t\t\tpage: 1\n\t\t\t},\n\t\t\t() => this.setMaxPages()\n\t\t);\n\t}\n\n\tfirstPage() {\n\t\tthis.setState({\n\t\t\tpage: 1\n\t\t});\n\t}\n\tchangePage(count) {\n\t\tlet newPage = this.state.page + count;\n\t\tif (newPage > 0 && newPage <= this.state.maxPages)\n\t\t\tthis.setState({\n\t\t\t\tpage: newPage\n\t\t\t});\n\t}\n\tlastPage() {\n\t\tthis.setState({\n\t\t\tpage: this.state.maxPages\n\t\t});\n\t}\n\n\tsetMaxPages() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tmaxPages: Math.ceil(this.state.filteredMovies.length / this.state.display)\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (this.state.page > this.state.maxPages) {\n\t\t\t\t\tthis.changePage(-1);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\trenderMovies() {\n\t\tif (!this.state.movies || !this.state.filteredMovies) return null;\n\n\t\tlet counter = 0;\n\t\tlet pageCounter = (this.state.page - 1) * this.state.display;\n\t\treturn this.state.filteredMovies.map((movie, index) => {\n\t\t\tif (counter === this.state.display || index < pageCounter) return null;\n\n\t\t\tcounter++;\n\t\t\treturn (\n\t\t\t\t<Movie\n\t\t\t\t\tkey={movie.id}\n\t\t\t\t\tid={movie.id}\n\t\t\t\t\ttitle={movie.title}\n\t\t\t\t\tcategory={movie.category}\n\t\t\t\t\tlikes={movie.likes}\n\t\t\t\t\tdislikes={movie.dislikes}\n\t\t\t\t\tonDelete={id => this.deleteMovie(id)}\n\t\t\t\t\tonLike={id => this.likeMovie(id)}\n\t\t\t\t\tonDislike={id => this.dislikeMovie(id)}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"nav\">\n\t\t\t\t\t<MdReplay className=\"refresh\" onClick={() => this.refresh()} />\n\t\t\t\t\t<Multiselect\n\t\t\t\t\t\ttype=\"categories\"\n\t\t\t\t\t\toptions={this.getCategories()}\n\t\t\t\t\t\tonSelect={category => this.selectCategory(category)}\n\t\t\t\t\t\tmultiple={true}\n\t\t\t\t\t/>\n\t\t\t\t\t<Multiselect\n\t\t\t\t\t\ttype=\"display\"\n\t\t\t\t\t\toptions={[4, 8, 12]}\n\t\t\t\t\t\tonSelect={count => this.selectDisplay(count)}\n\t\t\t\t\t\tmultiple={false}\n\t\t\t\t\t\tselected={4}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<FlipMove className=\"card-container\">{this.renderMovies()}</FlipMove>\n\t\t\t\t<div className=\"nav page\">\n\t\t\t\t\t<MdFirstPage onClick={() => this.firstPage()} />\n\t\t\t\t\t<MdChevronLeft onClick={() => this.changePage(-1)} />\n\t\t\t\t\tPage {this.state.page}\n\t\t\t\t\t<MdChevronRight onClick={() => this.changePage(1)} />\n\t\t\t\t\t<MdLastPage onClick={() => this.lastPage()} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}